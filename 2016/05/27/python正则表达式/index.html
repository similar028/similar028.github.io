<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8" />
  
  <title>python之正则表达式 | lazy</title>
  <meta name="author" content="lazy" />

  
  <meta name="description" content="我们已经搞定了怎样获取页面的内容，不过还差一步，这么多杂乱的代码夹杂文字我们怎样把它提取出来整理呢？下面就开始介绍一个十分强大的工具，正则表达式！" />
  

  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

  <meta property="og:title" content="python之正则表达式" />
  <meta property="og:site_name" content="lazy" />

  
  
  
  
  

  
    <meta property="og:image" content="undefined" />
  

  
  <link href="/css/images/favicon.ico" rel="icon" />
  

  <link rel="alternate" href="/atom.xml" title="lazy" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->


  <!-- baidu webmaster push -->
  <script src='//push.zhanzhang.baidu.com/push.js'></script>

</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">lazy</a></h1>
  <h2><a href="/"></a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">主页</a></li>
    
      <li><a href="/achieve">所有文章</a></li>
    
      <li><a href="/plan">学习计划</a></li>
    
      <li><a href="/developer">开发者</a></li>
    
      <li><a href="/about">关于</a></li>
    
      <li><a href="http://www.cnblogs.com/lazy0">aother blog</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-05-27T13:26:36.000Z"><a href="/2016/05/27/python正则表达式/">2016-05-27</a></time>
      
      
  
    <h1 class="title">python之正则表达式</h1>
  

    </header>
    <div class="entry">
      
        <p>我们已经搞定了怎样获取页面的内容，不过还差一步，这么多杂乱的代码夹杂文字我们怎样把它提取出来整理呢？下面就开始介绍一个十分强大的工具，正则表达式！</p>
<a id="more"></a>
<h3 id="什么叫做正则表达式？"><a href="#什么叫做正则表达式？" class="headerlink" title="什么叫做正则表达式？"></a>什么叫做正则表达式？</h3><p>正则表达式是对字符串操作的一种逻辑公式，就是用事先定义好的一些特定字符、及这些特定字符的组合，正则表达式使用耽搁字符串来描述，匹配一系列符合某个句法规则的字符串。</p>
<p>简单理解，就是对字符串的检索匹配和处理组成一个“规则字符串”，这个“规则字符串”用来表达对字符串的一种过滤逻辑。</p>
<h3 id="为什么会有正则表达式？"><a href="#为什么会有正则表达式？" class="headerlink" title="为什么会有正则表达式？"></a>为什么会有正则表达式？</h3><p>想要从返回的页面内容提取出我们想要的内容。</p>
<h3 id="正则表达式如何匹配的？"><a href="#正则表达式如何匹配的？" class="headerlink" title="正则表达式如何匹配的？"></a>正则表达式如何匹配的？</h3><pre><code>1.依次拿出表达式和文本中的字符比较，
2.如果每一个字符都能匹配，则匹配成功；一旦有匹配不成功的字符则匹配失败。
3.如果表达式中有量词或边界，这个过程会稍微有一些不同。
</code></pre><h3 id="正则表达式的基本语法。"><a href="#正则表达式的基本语法。" class="headerlink" title="正则表达式的基本语法。"></a>正则表达式的基本语法。</h3><pre><code>.    匹配除换行符以外的任意字符
^    匹配字符串的开始
$    匹配字符串的结束
[]   用来匹配一个指定的字符类别
？   对于前一个字符字符重复0次到1次
*    对于前一个字符重复0次到无穷次
{}   对于前一个字符重复m次
{m，n} 对前一个字符重复为m到n次
\d   匹配数字，相当于[0-9]
\D   匹配任何非数字字符，相当于[^0-9]
\s   匹配任意的空白符，相当于[ fv]
\S   匹配任何非空白字符，相当于[^ fv]
\w   匹配任何字母数字字符，相当于[a-zA-Z0-9_]
\W   匹配任何非字母数字字符，相当于[^a-zA-Z0-9_]
</code></pre><h3 id="一些记得的知识点"><a href="#一些记得的知识点" class="headerlink" title="一些记得的知识点"></a>一些记得的知识点</h3><pre><code>\b   匹配单词的开始或结束
\d+匹配1个或更多连续的数字
\d**匹配重复任意次(可能是0次)
^匹配你要用来查找的字符串的开头
$匹配结尾
^\d{5,12}$,匹配5-12的数字
^\s{5,12}$,匹配5-12位的字符
^\w{5,12}$,匹配5-12位的字母，数字，下划线，或者汉子
\W \D \B \S 意思刚好相反
[^x]匹配除了x之外的任意字符
[^aed]匹配除了aed之外的任意字符

查找 . *  \ 使用\. \* \\
* 0 - 多次 
+ 1 - 多次
? 0 - 1次
{n} n次
{n,} n - 多次
{n,m} n - m 次

\d--&gt;[0-9]
\w--&gt;[a-z0-9A-Z]
</code></pre><h3 id="一个小小的实例"><a href="#一个小小的实例" class="headerlink" title="一个小小的实例"></a>一个小小的实例</h3><pre><code>\(?0\d{2}\)?[- ]?\d{8}|0\d{2}[- ]?\d{8}这个表达式匹配3位区号的电话号码，
其中区号可以用小括号括起来，也可以不用，区号与本地号间可以用连字号或空格间隔，
也可以没有间隔。你可以试试用分枝条件把这个表达式扩展成也支持4位区号的。
</code></pre><h3 id="正则常用的一些函数用法"><a href="#正则常用的一些函数用法" class="headerlink" title="正则常用的一些函数用法"></a>正则常用的一些函数用法</h3><pre><code>print (re.match(&apos;www&apos;,&apos;www.baidu.com&apos;).span())#从起始位置开始
print (re.search(&apos;com&apos;,&apos;www.baidu.com&apos;).span())#未从起始位置开始

re.match只匹配字符串的开始，如果字符串开始不符合正则表达式，则匹配失败，函数返回None；而re.search匹配整个字符串，直到找到一个匹配。

在Python中使用正则表达式进行查找

‘re’模块提供了几个方法对输入的字符串进行确切的查询。我们将会要讨论的方法有：

re.match()
re.search()
re.findall()

match匹配字符串的开始位置
search匹配字符串的任意位置
&gt;&gt;&gt; match = re.search(r&apos;dog&apos;, &apos;dog cat dog&apos;)
&gt;&gt;&gt; match.group(0)
&apos;dog&apos;

Python中我使用的最多的查找方法是findall()方法

[&apos;dog&apos;, &apos;dog&apos;]
&gt;&gt;&gt; re.findall(r&apos;cat&apos;, &apos;dog cat dog&apos;)
[&apos;cat&apos;]


&gt;&gt;&gt; contactInfo = &apos;Doe, John: 555-1212&apos;
&gt;&gt;&gt; match = re.search(r&apos;(\w+), (\w+): (\S+)&apos;, contactInfo)
&gt;&gt;&gt; match.group(0)
&apos;Doe, John: 555-1212&apos;
&gt;&gt;&gt; match.group(1)
&apos;Doe&apos;
&gt;&gt;&gt; match.group(2)
&apos;John&apos;
&gt;&gt;&gt; match.group(3)
&apos;555-1212&apos;
</code></pre><h3 id="实际案例"><a href="#实际案例" class="headerlink" title="实际案例"></a>实际案例</h3><p>案例1，</p>
<pre><code>import re
pattern=re.compile(&apos;hello&apos;)
match=pattern.match(&apos;hello world&apos;)
print match.group()
</code></pre><p>案例2</p>
<pre><code>import re
match=re.findall(&apos;hello&apos;,&apos;hello world&apos;)
print match
</code></pre><p>re模块提供正则表达式的支持<br>字符串形式编译为Pattern实例；<br>使用Pattern实例处理文本并获得匹配结果；</p>
<p>案例3，</p>
<pre><code>import re
word =&apos;http://www.baidu.com python_1.2&apos;
key=re.findall(&apos;h.&apos;,word)
print key
匹配.任意一个字符
</code></pre><p>案例4，</p>
<pre><code>import re
word =&apos;http://www.baidu.com python_1.2&apos;
key=re.findall(&apos;\.&apos;,word)
print key
匹配.转义的字符
</code></pre><p>案例5，</p>
<pre><code>import re
word =&apos;http://www.baidu.com python_1.2&apos;
key=re.findall(&apos;\d\.\d&apos;,word)
print key
匹配两个数字的字符以及字符.
</code></pre><p>案例6，</p>
<pre><code>import re
word =&apos;httphttp://www.baidu.com python_1.2&apos;
key=re.findall(&apos;http*&apos;,word)
print key
匹配所有的http
</code></pre><p>案例7，</p>
<pre><code>import re
word =&apos;httphttp://www.baidu.com python_1.2&apos;
key=re.findall(&apos;t{2}&apos;,word)
print key
匹配所有的http
</code></pre><p>案例8，</p>
<pre><code>#!usr/bin/env python 
#-*- coding:utf_8 -*-
import urllib
import re
html=&apos;&apos;&apos;
    &lt;div class=&quot;one&quot;&gt;&lt;div class=&quot;aaa&quot; title=&quot;白帽子&quot; onclick=......
    &apos;&apos;&apos;
title=re.findall(r&apos;&lt;div class=&quot;aaa&quot; title=&quot;(.*?)&quot; onclick&apos;,html)

for i in title:
    print i

匹配title内容
</code></pre><h3 id="下面的是针对语法做的一些代码操作"><a href="#下面的是针对语法做的一些代码操作" class="headerlink" title="下面的是针对语法做的一些代码操作"></a>下面的是针对语法做的一些代码操作</h3><pre><code>#!usr/bin/env python 
#-*- coding:utf_8 -*-
import urllib
import re
import os
pattern=re.compile(r&apos;hello&apos;)
match=pattern.match(&apos;hello world&apos;)
if match:
    print match.group()
else:
    pass

m=re.match(r&apos;aaa&apos;,&apos;aaaaaaa efe&apos;)
print m.group()


import re
m = re.match(r&apos;(\w+) (\w+)(?P&lt;sign&gt;.*)&apos;, &apos;hello world!&apos;)

print &quot;m.string:&quot;, m.string
print &quot;m.re:&quot;, m.re
print &quot;m.pos:&quot;, m.pos
print &quot;m.endpos:&quot;, m.endpos
print &quot;m.lastindex:&quot;, m.lastindex
print &quot;m.lastgroup:&quot;, m.lastgroup

print &quot;m.group(1,2):&quot;, m.group(1, 2)
print &quot;m.groups():&quot;, m.groups()
print &quot;m.groupdict():&quot;, m.groupdict()
print &quot;m.start(2):&quot;, m.start(2)
print &quot;m.end(2):&quot;, m.end(2)
print &quot;m.span(2):&quot;, m.span(2)
print r&quot;m.expand(r&apos;\2 \1\3&apos;):&quot;, m.expand(r&apos;\2 \1\3&apos;)


p=re.compile(r&apos;\=&apos;)#根据特殊字符进行分割操作
a=p.split(&apos;cookie=fwefwvb,password=fwefwefwefw&apos;)
print a


p=re.compile(r&apos;\d+&apos;)#根据特殊字符进行分割
a=p.split(&apos;dwedw1fwefwvb2fwefwe4fwefw&apos;)
print a
print a[3]
b=p.findall(&apos;dwedw1fwefwvb2fwefwe4fwefw&apos;)
print b
print b[1]


#!/usr/bin/python
import re

line = &quot;Cats are smarter than dogs&quot;

matchObj = re.match( r&apos;(.*) are (.*?) .*&apos;, line, re.M|re.I)

if matchObj:
   print &quot;matchObj.group() : &quot;, matchObj.group()
   print &quot;matchObj.group(1) : &quot;, matchObj.group(1)
   print &quot;matchObj.group(2) : &quot;, matchObj.group(2)
else:
   print &quot;No match!!&quot;
#!/usr/bin/python
import re

phone = &quot;2004-959-559 # This is Phone Number&quot;

# Delete Python-style comments
num = re.sub(r&apos;#.*$&apos;, &quot;&quot;, phone)
print &quot;Phone Num : &quot;, num

# Remove anything other than digits
num = re.sub(r&apos;\D&apos;, &quot;&quot;, phone)    
print &quot;Phone Num : &quot;, num

&apos;&apos;&apos;
f=open(&apos;module/test.txt&apos;,&apos;r&apos;)
for line in f.readlines():
    payload=line.strip()
    #print type(payload)
    if len(payload)!=0:
        re_telepone=re.match(r&apos;^(\d{3})-(\d{3,20})$&apos;, payload)
        print re_telepone.group(2)
        p=open(&apos;module/test2.txt&apos;,&apos;w&apos;)
        p.write(re_telepone.group(2))
    else:
        break
f.close()
p.close()


&apos;&apos;&apos;
&apos;&apos;&apos;
test=&apos;010-12345&apos;
if re.match(r&apos;\d{3}-\d{3,8}$&apos;,test):
    print &apos;ok&apos;
else:
    print &apos;fail&apos;

a=re.split(r&apos;[\s\,]+&apos;,&apos;a,b,ccc   dd&apos;)
print a
a=re.split(r&apos;[\s\,\;]+&apos;,&apos;a,b,ccc;;;   dd&apos;)
print a
reg=&apos;Cookie=aaaaa;falg=ddddd&apos;
a=re.split(r&apos;[\s\,\;]+&apos;,reg)
print a[1]
a[1]=re.split(r&apos;[\s\,\=]&apos;,a[1])
print a[1]
print a[1][1]

reg=&apos;Cookie=aaaaa;falg=ddddd&apos;
a=re.split(r&apos;[\s\,\;,\=]+&apos;,reg)
print a[3]

print re.match(r&apos;^(\d+)(0*)$&apos;,&apos;12300&apos;).groups()#贪婪

aa=re.match(r&apos;^(\d+?)(0*)$&apos;,&apos;12300&apos;).groups()#非贪婪
print aa
print aa[1]
&apos;&apos;&apos;
</code></pre><h3 id="以后会继续做补充！！！！"><a href="#以后会继续做补充！！！！" class="headerlink" title="以后会继续做补充！！！！"></a>以后会继续做补充！！！！</h3>
      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href='javascript:void(0)' class="share-link bdsharebuttonbox" data-cmd="more">分享</a>
        </div>
        
  
  <div class="categories">
    <a href="/categories/python/">python</a>
  </div>

        
  
  <div class="tags">
    <a href="/tags/python/">python</a>, <a href="/tags/正则表达式/">正则表达式</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



</div></div>
    <aside id="sidebar" class="alignright">
  <div class="widget tag">
    <h3 class="title">关于文章</h3>
    <div class="entry">
    <P>文章有问题可以发邮件</p>
    <p>大家彼此相互学习</p>
      <p>邮箱：lazy@dropsec.xyz</p>
    </div>
</div>

  <div class="widget tag">
    <h3 class="title">赞助我</h3>
    <div class="entry">
      <img src='/css/images/qr_alipay.png' style='width:100%;background:rgba(255,255,255,0.6)' />
    </div>
</div>

  
<div class="widget tagcloud">
  <h3 class="title">标签云</h3>
  <div class="entry">
    <a href="/tags/CSRF/" style="font-size: 10px;">CSRF</a> <a href="/tags/MarkDown/" style="font-size: 10px;">MarkDown</a> <a href="/tags/hexo/" style="font-size: 20px;">hexo</a> <a href="/tags/json/" style="font-size: 10px;">json</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/sql注入，手工/" style="font-size: 10px;">sql注入，手工</a> <a href="/tags/sql注入，过狗，过waf/" style="font-size: 10px;">sql注入，过狗，过waf</a> <a href="/tags/上传绕过/" style="font-size: 15px;">上传绕过</a> <a href="/tags/正则表达式/" style="font-size: 10px;">正则表达式</a> <a href="/tags/渗透测试/" style="font-size: 15px;">渗透测试</a> <a href="/tags/渗透测试，命令执行/" style="font-size: 10px;">渗透测试，命令执行</a> <a href="/tags/过waf，过狗/" style="font-size: 10px;">过waf，过狗</a>
  </div>
</div>


  
  <div class="widget tag">
    <h3 class="title">归档</h3>
    <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archive/2016/06/">    2016年06月</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2016/05/">    2016年05月</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2016/04/">    2016年04月</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2015/06/">    2015年06月</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archive/2015/05/">    2015年05月</a><span class="archive-list-count">4</span></li></ul>
  </div>


  
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/python/">python</a><small>2</small></li>
  
    <li><a href="/categories/十大漏洞/">十大漏洞</a><small>3</small></li>
  
    <li><a href="/categories/杂谈/">杂谈</a><small>4</small></li>
  
    <li><a href="/categories/渗透测试/">渗透测试</a><small>3</small></li>
  
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">近期文章</h3>
  <ul class="entry">
    
      <li>
        <a href="/2016/06/07/phpcms_2008远程代码执行漏洞/">phpcms-2008 远程代码执行漏洞</a>
      </li>
    
      <li>
        <a href="/2016/05/30/python_json模块/">python之json模块</a>
      </li>
    
      <li>
        <a href="/2016/05/27/python正则表达式/">python之正则表达式</a>
      </li>
    
      <li>
        <a href="/2016/04/28/十大漏洞之远程命令执行/">十大漏洞之命令执行</a>
      </li>
    
      <li>
        <a href="/2016/04/27/十大漏洞之文件上传/">十大漏洞之文件上传</a>
      </li>
    
  </ul>
</div>


  <div class="widget tag">
  <h3 class="title">友情链接</h3>
  <div class="entry">
    <ul>
<!-- link start -->
<li><a href='http://www.cnblogs.com/lazy0'>lazy</a></li>
<li><a href='http://www.baidu.com'>baidu</a></li>
<!-- link  end -->
    </ul>
  </div>
</div>


  <div class="widget tag">
    <h3 class="title">统计</h3>
    <div class="entry">
      
	<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1260064002'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s4.cnzz.com/z_stat.php%3Fid%3D1260064002' type='text/javascript'%3E%3C/script%3E"));</script>




    </div>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

<div class="alignleft">
<span id="busuanzi_container_site_pv">
    你好，你是第:<span id="busuanzi_value_site_pv"></span>位访客
</span>
</div>

<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1260064002'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s4.cnzz.com/z_stat.php%3Fid%3D1260064002' type='text/javascript'%3E%3C/script%3E"));</script>



</footer>
  <script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>



<script>
    //Kill XP and IE8
    (function(){
        var ua = navigator.userAgent;
        var res = /Windows NT (\d+\.\d+)/.exec(ua);
        var xpOrLower = res && JSON.parse(res[1]) < 6;
        res = /MSIE (\d+\.\d+)/.exec(ua);
        var ie8OrLower = res && JSON.parse(res[1]) < 9;
        if(xpOrLower || ie8OrLower)
        {
            alert('请不要用XP及之前的Windows系统，和IE8及之前的IE浏览器访问本站！');
            location.href = "about:blank";
        }
        var fromBaiduSE = /^https?:\/\/www.baidu.com/.test(document.referrer);
        if(fromBaiduSE)
        {
            alert('检测到你还在使用百度搜索，作为一个程序员，这是一种自暴自弃！\n\n做不作恶的程序员，从不用百度开始！')
            location.href = "about:blank";
        }
    })();
</script>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1260064002'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s4.cnzz.com/z_stat.php%3Fid%3D1260064002' type='text/javascript'%3E%3C/script%3E"));</script> 
//前面要添加的代码  
//百度统计的代码  

<div id='bg'></div>
</body>
</html>